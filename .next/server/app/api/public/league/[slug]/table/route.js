"use strict";(()=>{var e={};e.id=410,e.ids=[410],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},95365:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{GET:()=>l});var a=s(49303),i=s(88716),n=s(60670),o=s(87070),u=s(83493);async function l(e,{params:t}){try{let{slug:e}=t,s=await u.Z.league.findUnique({where:{slug:e},include:{teams:!0,fixtures:{include:{homeTeam:!0,awayTeam:!0}}}});if(!s)return o.NextResponse.json({error:"Liga nicht gefunden"},{status:404});let r=s.teams.map(e=>{let t=s.fixtures.filter(t=>(t.homeTeamId===e.id||t.awayTeamId===e.id)&&null!==t.homeSets&&null!==t.awaySets),r=t.length,a=0,i=0,n=0,o=0,u=0;return t.forEach(t=>{let r=t.homeTeamId===e.id,l=t.homeSets||0,p=t.awaySets||0;r?(o+=l,u+=p,l>p?(a++,3===l&&0===p?n+=s.pointsWin30:3===l&&1===p?n+=s.pointsWin31:3===l&&2===p&&(n+=s.pointsWin32)):(i++,2===l&&3===p&&(n+=s.pointsLoss32))):(o+=p,u+=l,p>l?(a++,3===p&&0===l?n+=s.pointsWin30:3===p&&1===l?n+=s.pointsWin31:3===p&&2===l&&(n+=s.pointsWin32)):(i++,2===p&&3===l&&(n+=s.pointsLoss32)))}),{teamId:e.id,teamName:e.name,played:r,won:a,lost:i,points:n,setsWon:o,setsLost:u,setsDiff:o-u}}).sort((e,t)=>e.points!==t.points?t.points-e.points:t.setsDiff-e.setsDiff);return o.NextResponse.json(r)}catch(e){return console.error("Error calculating table:",e),o.NextResponse.json({error:"Serverfehler"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/public/league/[slug]/table/route",pathname:"/api/public/league/[slug]/table",filename:"route",bundlePath:"app/api/public/league/[slug]/table/route"},resolvedPagePath:"/Users/schne1s/Documents/KI_PAGE/src/app/api/public/league/[slug]/table/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:m}=p,g="/api/public/league/[slug]/table/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},83493:(e,t,s)=>{s.d(t,{Z:()=>i,_:()=>a});let r=require("@prisma/client"),a=globalThis.prisma??new r.PrismaClient({}),i=a}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,5972],()=>s(95365));module.exports=r})();