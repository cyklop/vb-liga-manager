(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{22432:function(e,r,t){Promise.resolve().then(t.bind(t,38991))},38991:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(57437),s=t(2265),l=t(99376),o=t(66003),n=t(80605),i=t(18618);function c(){let[e,r]=(0,s.useState)(""),[t,c]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[x,y]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[b,k]=(0,s.useState)(!1),j=(0,l.useRouter)(),w=async r=>{r.preventDefault(),m("");try{await fetch("/api/auth/signout",{method:"POST"}),await fetch("/api/logout",{method:"POST"}),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")});let r=await (0,n.signIn)("credentials",{redirect:!1,email:e,password:t,rememberMe:d,callbackUrl:"/dashboard"});(null==r?void 0:r.error)?m(r.error||"Anmeldung fehlgeschlagen"):window.location.href="/dashboard"}catch(e){console.error("Login error:",e),m("Ein Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}};return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session"),r=await e.json();r&&r.user&&j.replace("/dashboard")}catch(e){console.error("Error checking login status:",e)}})()},[j]),(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)(i.Card,{color:"transparent",shadow:!1,placeholder:void 0,className:"dark:bg-gray-800/30 p-6",children:[(0,a.jsx)(i.Typography,{variant:"h4",color:"blue-gray",placeholder:void 0,className:"dark:text-gray-100",children:"Anmelden"}),(0,a.jsx)(i.Typography,{color:"gray",className:"mt-1 font-normal dark:text-gray-300",placeholder:void 0,children:"Geben Sie Ihre Anmeldedaten ein, um sich anzumelden."}),(0,a.jsxs)("form",{onSubmit:w,className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:[(0,a.jsxs)("div",{className:"mb-4 flex flex-col gap-6",children:[(0,a.jsx)(i.Input,{size:"lg",label:"E-Mail",value:e,onChange:e=>r(e.target.value),placeholder:void 0,crossOrigin:void 0,className:"dark:text-gray-200 dark:border-gray-500"}),(0,a.jsx)(i.Input,{type:"password",size:"lg",label:"Passwort",value:t,onChange:e=>c(e.target.value),placeholder:void 0,crossOrigin:void 0,className:"dark:text-gray-200 dark:border-gray-500"})]}),(0,a.jsx)(i.Checkbox,{label:(0,a.jsx)(i.Typography,{variant:"small",color:"gray",className:"flex items-center font-normal dark:text-gray-300",placeholder:void 0,children:"Angemeldet bleiben"}),containerProps:{className:"-ml-2.5"},placeholder:void 0,crossOrigin:void 0,className:"focus:ring-0 focus:ring-offset-0",iconProps:{className:""},checked:d,onChange:e=>h(e.target.checked)}),u&&(0,a.jsx)(i.Typography,{color:"red",className:"mt-2 text-center text-sm",placeholder:void 0,children:u}),(0,a.jsx)(i.Button,{className:"mt-6",fullWidth:!0,type:"submit",placeholder:void 0,children:"Anmelden"}),(0,a.jsxs)(i.Typography,{color:"gray",className:"mt-4 text-center font-normal dark:text-gray-300",placeholder:void 0,children:["Passwort vergessen?"," ",(0,a.jsx)("button",{type:"button",onClick:()=>k(!0),className:"font-medium text-blue-500 transition-colors hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Zur\xfccksetzen"})]})]}),(0,a.jsx)(o.Z,{isOpen:b,onClose:()=>{k(!1),v(""),y(""),p("")},title:"Passwort zur\xfccksetzen",children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),v(""),y("");try{let e=await fetch("/api/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g})}),r=await e.json();e.ok?y(r.message):v(r.message||"Ein Fehler ist aufgetreten.")}catch(e){console.error("Password reset request failed:",e),v("Fehler beim Anfordern des Passwort-Resets. Bitte versuchen Sie es sp\xe4ter erneut.")}},children:[x&&(0,a.jsx)(i.Typography,{color:"green",className:"mb-4 text-center text-sm",placeholder:void 0,children:x}),(0,a.jsx)(i.Input,{type:"email",size:"lg",label:"E-Mail-Adresse",value:g,onChange:e=>p(e.target.value),placeholder:void 0,crossOrigin:void 0,className:"mb-4 dark:text-gray-200 dark:border-gray-500"}),f&&(0,a.jsx)(i.Typography,{color:"red",className:"mb-4 text-center text-sm",placeholder:void 0,children:f}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.Button,{variant:"text",color:"red",onClick:()=>{k(!1),v(""),y(""),p("")},placeholder:void 0,children:"Abbrechen"}),(0,a.jsx)(i.Button,{type:"submit",placeholder:void 0,children:"Link senden"})]})]})})]})})}},66003:function(e,r,t){"use strict";var a=t(57437);t(2265),r.Z=e=>{let{isOpen:r,onClose:t,title:s,children:l}=e;return r?(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg shadow-lg w-full max-w-md relative",children:[" ",(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium dark:text-gray-100",children:s})," ",(0,a.jsxs)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-100",children:[" ",(0,a.jsx)("span",{className:"sr-only",children:"Schlie\xdfen"}),(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),l]})}):null}}},function(e){e.O(0,[384,768,307,971,117,744],function(){return e(e.s=22432)}),_N_E=e.O()}]);