(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{5476:function(e,t,i){Promise.resolve().then(i.bind(i,68437))},68437:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var a=i(57437),s=i(2265),n=i(14114);function l(){let[e,t]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[r,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/leagues/active");if(e.ok){let t=await e.json();t.activeLeagueId?d(t.activeLeagueId):i.length>0&&d(i[0].id)}}catch(e){console.error("Error fetching active league:",e)}};(async()=>{try{let e;let t=await fetch("/api/users/me"),i=await t.json();if((e=!i.team||i.isAdmin||i.isSuperAdmin?await fetch("/api/leagues"):await fetch("/api/leagues?teamId=".concat(i.team.id))).ok){let t=await e.json();l(t)}}catch(e){console.error("Error fetching leagues:",e)}})().then(()=>e())},[]),(0,s.useEffect)(()=>{r&&u(r)},[r,o]);let u=async e=>{h(!0);try{let i=await fetch("/api/leagues/".concat(e,"/fixtures?upcoming=").concat(o));if(i.ok){let e=await i.json();t(e)}}catch(e){console.error("Error fetching fixtures:",e)}finally{h(!1)}},x=async e=>{let t=parseInt(e.target.value);d(t);try{await fetch("/api/leagues/active",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:t})})}catch(e){console.error("Error setting active league:",e)}},g=e=>e?new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}):"Datum N/A";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Spielplan"}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,a.jsx)("label",{htmlFor:"leagueSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Liga ausw\xe4hlen:"}),(0,a.jsxs)("select",{id:"leagueSelect",value:r||"",onChange:x,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Liga ausw\xe4hlen"}),i.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"showOnlyUpcoming",checked:o,onChange:e=>c(e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"showOnlyUpcoming",className:"ml-2 block text-sm text-gray-900",children:"Nur anstehende Spiele anzeigen"})]})]}),m?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):e.length>0?(0,a.jsx)("div",{className:"space-y-6",children:Array.from(new Set(e.map(e=>e.matchday))).sort((e,t)=>(e||0)-(t||0)).map(t=>(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,a.jsx)("div",{className:"bg-indigo-50 px-4 py-2 border-b border-indigo-100",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-indigo-800",children:t?"Spieltag ".concat(t):"Spieltag nicht zugeordnet"})}),(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:e.filter(e=>e.matchday===t).map(e=>(0,a.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:(0,a.jsxs)("div",{className:"mt-2 sm:mt-0",children:[(0,a.jsx)("span",{className:"font-medium",children:e.homeTeam.name}),(0,a.jsx)("span",{className:"mx-2",children:"vs"}),(0,a.jsx)("span",{className:"font-medium",children:e.awayTeam.name})]})}),(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:g(e.fixtureDate)}),null!==e.homeSets&&null!==e.awaySets?(0,a.jsxs)("div",{className:"mt-1 text-sm font-semibold",children:[e.homeSets," : ",e.awaySets,null!==e.homePoints&&null!==e.awayPoints&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(B\xe4lle: ",e.homePoints," : ",e.awayPoints,")"]})]}):(0,a.jsx)("div",{className:"mt-1 text-sm text-gray-500",children:"Ergebnis ausstehend"})]})]})},e.id))})]},t||"unknown"))}):(0,a.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6 text-center text-gray-500",children:r?"Keine Spiele gefunden.":"Bitte w\xe4hlen Sie eine Liga aus."})]})]})}},14114:function(e,t,i){"use strict";i.d(t,{Z:function(){return x}});var a=i(57437),s=i(2265),n=i(48568),l=i(77165),r=i(4355),d=i(16503),o=i(27648),c=i(99376);let m=[{name:"Tabelle",href:"/table"},{name:"Spielplan",href:"/fixtures"}],h=[{name:"Mannschaften",href:"/admin/teams"},{name:"Benutzer",href:"/admin/users"},{name:"Ligen",href:"/admin/leagues"}];function u(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(" ")}function x(){let e=(0,c.usePathname)();(0,c.useRouter)();let[t,i]=(0,s.useState)(null);(0,s.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/users/me");if(e.ok){let t=await e.json();i(t)}else console.error("Fehler beim Abrufen des Benutzers:",e.statusText)}catch(e){console.error("Fehler beim Abrufen des Benutzers:",e)}},g=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),await fetch("/api/logout",{method:"POST"}),i(null),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),window.location.href="/login"}catch(e){console.error("Fehler beim Abmelden:",e)}};return(0,a.jsx)(n.p,{as:"nav",className:"bg-indigo-600",children:i=>{let{open:s}=i;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,a.jsxs)(n.p.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-indigo-200 hover:bg-indigo-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),s?(0,a.jsx)(l.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,a.jsx)(r.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,a.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,a.jsx)(o.default,{href:"/dashboard",className:"text-2xl font-bold text-white",children:"Volleyball Liga"})}),(0,a.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[m.map(t=>(0,a.jsx)(o.default,{href:t.href,className:u(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,a.jsx)(o.default,{href:"/team",className:u("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,a.jsxs)("div",{className:"relative group hover:cursor-pointer",children:[(0,a.jsxs)(o.default,{href:"/admin",className:u("/admin"===e||e.startsWith("/admin/")?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium inline-flex items-center"),children:["Admin",(0,a.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),(0,a.jsx)("div",{className:"absolute right-0 z-10 mt-0 w-48 origin-top-right rounded-md bg-white dark:bg-card py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block",children:h.map(t=>(0,a.jsx)(o.default,{href:t.href,className:u(e===t.href?"bg-gray-100 text-gray-900 dark:bg-muted dark:text-foreground":"text-gray-700 hover:bg-gray-100 dark:text-foreground dark:hover:bg-muted","block px-4 py-2 text-sm"),children:t.name},t.name))})]})]})})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.default,{href:"/account",className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400 mr-2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,a.jsx)("button",{onClick:g,className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400",children:(0,a.jsx)(d.Z,{className:"h-5 w-5"})})]}):(0,a.jsx)(o.default,{href:"/login",className:"rounded-md bg-indigo-500 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-400",children:"Login"})})]})}),(0,a.jsx)(n.p.Panel,{className:"sm:hidden",children:(0,a.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[m.map(t=>(0,a.jsx)(n.p.Button,{as:"a",href:t.href,className:u(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,a.jsx)(n.p.Button,{as:"a",href:"/team",className:u("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p.Button,{as:"a",href:"/admin",className:u("/admin"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Admin"}),h.map(t=>(0,a.jsx)(n.p.Button,{as:"a",href:t.href,className:u(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium pl-6"),children:t.name},t.name))]})]})})]})}})}}},function(e){e.O(0,[654,971,117,744],function(){return e(e.s=5476)}),_N_E=e.O()}]);