(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{40217:function(e,n,s){Promise.resolve().then(s.bind(s,12688))},12688:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return o}});var t=s(57437),a=s(2265),r=s(14114),i=s(66003),l=s(36233);function o(){let[e,n]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)({email:"",name:"",password:"",isAdmin:!1,teamId:""}),[h,p]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{f(),b()},[]);let f=async()=>{let e=await fetch("/api/users");n(await e.json())},b=async()=>{let e=await fetch("/api/teams");o(await e.json())},y=async e=>{e.preventDefault();try{(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok&&(m({email:"",name:"",password:"",isAdmin:!1,teamId:""}),c(!1),f())}catch(e){console.error("Fehler beim Hinzuf\xfcgen des Benutzers",e)}},j=async e=>{g(e),p(!0)},w=async()=>{if(x)try{(await fetch("/api/users/".concat(x.id),{method:"DELETE"})).ok&&f()}catch(e){console.error("Fehler beim L\xf6schen des Benutzers",e)}p(!1),g(null)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Benutzer verwalten"}),(0,t.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4",children:"Neuen Benutzer hinzuf\xfcgen"}),(0,t.jsx)("ul",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.map(e=>(0,t.jsx)("li",{className:"border-b border-gray-200 last:border-b-0",children:(0,t.jsxs)("div",{className:"px-4 py-4 sm:px-6 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-indigo-600 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),e.team&&(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Team: ",e.team.name]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.isAdmin?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isAdmin?"Admin":"Benutzer"}),e.isSuperAdmin&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"Superadmin"}),(0,t.jsx)("button",{onClick:()=>j(e),className:"ml-2 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded text-xs",children:"L\xf6schen"})]})]})},e.id))})]}),(0,t.jsx)(i.Z,{isOpen:d,onClose:()=>c(!1),title:"Neuen Benutzer hinzuf\xfcgen",children:(0,t.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,t.jsx)("input",{type:"email",value:u.email,onChange:e=>m({...u,email:e.target.value}),placeholder:"E-Mail",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300",required:!0}),(0,t.jsx)("input",{type:"text",value:u.name,onChange:e=>m({...u,name:e.target.value}),placeholder:"Name",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300",required:!0}),(0,t.jsx)("input",{type:"password",value:u.password,onChange:e=>m({...u,password:e.target.value}),placeholder:"Passwort",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300",required:!0}),(0,t.jsxs)("select",{value:u.teamId,onChange:e=>m({...u,teamId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300",children:[(0,t.jsx)("option",{value:"",children:"Kein Team"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"isAdmin",checked:u.isAdmin,onChange:e=>m({...u,isAdmin:e.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"isAdmin",className:"ml-2 block text-sm text-gray-900",children:"Admin"})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Hinzuf\xfcgen"})]})}),h&&(0,t.jsx)(l.Z,{onConfirm:w,onCancel:()=>p(!1),message:"M\xf6chten Sie den Benutzer ".concat(null==x?void 0:x.name," wirklich l\xf6schen?")})]})}}},function(e){e.O(0,[654,979,971,117,744],function(){return e(e.s=40217)}),_N_E=e.O()}]);