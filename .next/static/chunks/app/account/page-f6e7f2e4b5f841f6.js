(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{16042:function(e,t,s){Promise.resolve().then(s.bind(s,58542))},58542:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(57437),r=s(2265),n=s(99376),i=s(14114),l=s(18618),o=e=>{let{user:t,onUpdate:s}=e,[n,i]=(0,r.useState)(t.name),[o,d]=(0,r.useState)(t.email),[m,c]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[x,g]=(0,r.useState)("");return(0,a.jsxs)(l.Card,{color:"transparent",shadow:!1,placeholder:void 0,children:[(0,a.jsx)(l.Typography,{variant:"h4",color:"blue-gray",placeholder:void 0,children:"Profil aktualisieren"}),(0,a.jsx)(l.Typography,{color:"gray",className:"mt-1 mb-4 font-normal dark:text-gray-200",children:"Geben Sie Ihre Details ein, um Ihr Profil zu aktualisieren."}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),g(""),m&&m!==h){g("Die Passw\xf6rter stimmen nicht \xfcberein.");return}let t={name:n,email:o};m&&(t.password=m),s(t)},className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:[(0,a.jsxs)("div",{className:"mb-4 flex flex-col gap-6",children:[(0,a.jsx)(l.Input,{size:"lg",label:"Name",value:n,onChange:e=>i(e.target.value),placeholder:void 0,className:"!transform-none"}),(0,a.jsx)(l.Input,{size:"lg",label:"Email",value:o,onChange:e=>d(e.target.value),placeholder:void 0,className:"!transform-none"}),(0,a.jsx)(l.Input,{type:"password",size:"lg",label:"Neues Passwort (optional)",value:m,onChange:e=>c(e.target.value),placeholder:void 0,className:"!transform-none"}),(0,a.jsx)(l.Input,{type:"password",size:"lg",label:"Passwort best\xe4tigen",value:h,onChange:e=>u(e.target.value),placeholder:void 0,className:"!transform-none"})]}),x&&(0,a.jsx)(l.Typography,{color:"red",className:"mt-2 font-normal",children:x}),(0,a.jsx)(l.Button,{className:"mt-6",fullWidth:!0,type:"submit",placeholder:void 0,children:"Profil aktualisieren"})]})]})},d=s(52060);function m(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[m,c]=(0,r.useState)(!0),h=(0,n.useRouter)(),{theme:u,setTheme:x}=(0,d.F)();(0,r.useEffect)(()=>{l(!0),g()},[]);let g=async()=>{c(!0);try{let e=await fetch("/api/users/me");if(e.ok){let s=await e.json();t(s)}else if(401===e.status){h.push("/login");return}}catch(e){console.error("Fehler beim Abrufen des Benutzerprofils",e)}finally{c(!1)}},f=async s=>{if(e)try{let e=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok){let s=await e.json();t(e=>e?{...e,...s}:null)}else console.error("Fehler beim Aktualisieren des Profils:",e.statusText)}catch(e){console.error("Fehler beim Aktualisieren des Benutzerprofils",e)}};return m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Laden..."})})})]}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)("header",{className:"bg-white dark:bg-card shadow",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-foreground",children:"Mein Konto"})})}),(0,a.jsx)("main",{children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,a.jsxs)("div",{className:"rounded-lg p-4 bg-white dark:bg-card shadow",children:[e&&(0,a.jsx)(o,{user:e,onUpdate:f}),(0,a.jsxs)("div",{className:"mt-8 border-t dark:border-border pt-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-foreground",children:"Darstellung"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"theme",className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-200",children:"Theme-Einstellung"}),s&&(0,a.jsxs)("select",{id:"theme",value:u,onChange:e=>{let t=e.target.value;x(t),f({theme:t})},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-gray-300 dark:border-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-card text-gray-900 dark:text-foreground",children:[(0,a.jsx)("option",{value:"light",children:"Hell"}),(0,a.jsx)("option",{value:"dark",children:"Dunkel"}),(0,a.jsx)("option",{value:"system",children:"System (Browser-Einstellung)"})]}),(0,a.jsx)("p",{className:"mt-2 mb-4 text-sm text-gray-500 dark:text-gray-200",children:"W\xe4hlen Sie Ihr bevorzugtes Erscheinungsbild f\xfcr die Anwendung."})]})]})]})})})})]}):null}},14114:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var a=s(57437),r=s(2265),n=s(48568),i=s(77165),l=s(4355),o=s(16503),d=s(27648),m=s(99376);let c=[{name:"Tabelle",href:"/table"},{name:"Spielplan",href:"/fixtures"}],h=[{name:"Mannschaften",href:"/admin/teams"},{name:"Benutzer",href:"/admin/users"},{name:"Ligen",href:"/admin/leagues"}];function u(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function x(){let e=(0,m.usePathname)();(0,m.useRouter)();let[t,s]=(0,r.useState)(null);(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/users/me");if(e.ok){let t=await e.json();s(t)}else console.error("Fehler beim Abrufen des Benutzers:",e.statusText)}catch(e){console.error("Fehler beim Abrufen des Benutzers:",e)}},g=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),await fetch("/api/logout",{method:"POST"}),s(null),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),window.location.href="/login"}catch(e){console.error("Fehler beim Abmelden:",e)}};return(0,a.jsx)(n.p,{as:"nav",className:"bg-indigo-600",children:s=>{let{open:r}=s;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,a.jsxs)(n.p.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-indigo-200 hover:bg-indigo-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),r?(0,a.jsx)(i.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,a.jsx)(l.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,a.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,a.jsx)(d.default,{href:"/dashboard",className:"text-2xl font-bold text-white",children:"Volleyball Liga"})}),(0,a.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[c.map(t=>(0,a.jsx)(d.default,{href:t.href,className:u(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,a.jsx)(d.default,{href:"/team",className:u("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,a.jsxs)("div",{className:"relative group hover:cursor-pointer",children:[(0,a.jsxs)(d.default,{href:"/admin",className:u("/admin"===e||e.startsWith("/admin/")?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium inline-flex items-center"),children:["Admin",(0,a.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),(0,a.jsx)("div",{className:"absolute right-0 z-10 mt-0 w-48 origin-top-right rounded-md bg-white dark:bg-card py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block",children:h.map(t=>(0,a.jsx)(d.default,{href:t.href,className:u(e===t.href?"bg-gray-100 text-gray-900 dark:bg-muted dark:text-foreground":"text-gray-700 hover:bg-gray-100 dark:text-foreground dark:hover:bg-muted","block px-4 py-2 text-sm"),children:t.name},t.name))})]})]})})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{href:"/account",className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400 mr-2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,a.jsx)("button",{onClick:g,className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})})]}):(0,a.jsx)(d.default,{href:"/login",className:"rounded-md bg-indigo-500 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-400",children:"Login"})})]})}),(0,a.jsx)(n.p.Panel,{className:"sm:hidden",children:(0,a.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[c.map(t=>(0,a.jsx)(n.p.Button,{as:"a",href:t.href,className:u(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,a.jsx)(n.p.Button,{as:"a",href:"/team",className:u("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p.Button,{as:"a",href:"/admin",className:u("/admin"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Admin"}),h.map(t=>(0,a.jsx)(n.p.Button,{as:"a",href:t.href,className:u(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium pl-6"),children:t.name},t.name))]})]})})]})}})}},52060:function(e,t,s){"use strict";s.d(t,{F:function(){return l},ThemeProvider:function(){return i}});var a=s(57437),r=s(2265);let n=(0,r.createContext)({theme:"system",setTheme:()=>{}});function i(e){let{children:t}=e,[s,i]=(0,r.useState)("system"),[l,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e;i(e=localStorage.getItem("theme")||"system"),o(!0),d(e)},[]),(0,r.useEffect)(()=>{l&&(localStorage.setItem("theme",s),d(s))},[s,l]);let d=e=>{let t=window.document.documentElement;if(t.classList.remove("light","dark"),"system"===e){let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t.classList.add(e),t.setAttribute("data-theme",e)}else t.classList.add(e),t.setAttribute("data-theme",e)};return(0,r.useEffect)(()=>{if("system"===s&&l){let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{d("system")};return e.addEventListener("change",t),t(),()=>e.removeEventListener("change",t)}},[s,l]),(0,a.jsx)(n.Provider,{value:{theme:s,setTheme:i},children:t})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}}},function(e){e.O(0,[384,654,768,971,117,744],function(){return e(e.s=16042)}),_N_E=e.O()}]);