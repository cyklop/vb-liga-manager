(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{62297:function(e,t,a){Promise.resolve().then(a.bind(a,7185))},7185:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var s=a(57437),i=a(2265),n=a(14114);function r(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(null),[l,c]=(0,i.useState)([]),[d,o]=(0,i.useState)(!0),[m,x]=(0,i.useState)([]),[h,u]=(0,i.useState)(null),[p,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let a=async()=>{try{let t=await fetch("/api/leagues/active");if(t.ok){let a=await t.json();a.activeLeagueId?r(a.activeLeagueId):e.length>0&&r(e[0].id)}}catch(e){console.error("Error fetching active league:",e)}};(async()=>{try{let e;let a=await fetch("/api/users/me"),s=await a.json();if((e=!s.team||s.isAdmin||s.isSuperAdmin?await fetch("/api/leagues"):await fetch("/api/leagues?teamId=".concat(s.team.id))).ok){let a=await e.json();t(a)}}catch(e){console.error("Error fetching leagues:",e)}})().then(()=>a())},[]),(0,i.useEffect)(()=>{a&&(f(a,h||void 0),y(a))},[a]);let f=async(e,t)=>{o(!0);try{let a=t?"/api/leagues/".concat(e,"/table?matchday=").concat(t):"/api/leagues/".concat(e,"/table"),s=await fetch(a);if(s.ok){let e=await s.json();c(e)}}catch(e){console.error("Error fetching table data:",e)}finally{o(!1)}},y=async e=>{try{let t=await fetch("/api/leagues/".concat(e,"/matchdays"));if(t.ok){let e=await t.json();x(e.matchdays)}}catch(e){console.error("Error fetching matchdays:",e)}},w=async e=>{let t=parseInt(e.target.value);r(t),u(null);try{await fetch("/api/leagues/active",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:t})})}catch(e){console.error("Error setting active league:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Tabelle"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"leagueSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Liga ausw\xe4hlen:"}),(0,s.jsxs)("select",{id:"leagueSelect",value:a||"",onChange:w,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Liga ausw\xe4hlen"}),e.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,s.jsx)("label",{htmlFor:"matchdaySelect",className:"block text-sm font-medium text-gray-700 mr-2",children:"Spieltag:"}),(0,s.jsxs)("select",{id:"matchdaySelect",value:h||"",onChange:e=>{let t=e.target.value,s=t?parseInt(t):null;u(s),a&&f(a,s||void 0)},className:"block w-40 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[(0,s.jsx)("option",{value:"",children:"Alle Spieltage"}),m.map(e=>(0,s.jsx)("option",{value:e,children:"Spieltag ".concat(e)},e))]})]}),d?(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):l.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platz"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spiele"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punkte"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S\xe4tze"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diff."}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"B\xe4lle"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diff."})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t+1}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.teamName}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:e.played}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:e.won}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:e.lost}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-center",children:e.points}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:[e.setsWon,":",e.setsLost]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:[e.setsDiff>0?"+":"",e.setsDiff]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:[e.pointsWon,":",e.pointsLost]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:[e.pointsDiff>0?"+":"",e.pointsDiff]})]},e.teamId))})]})}):(0,s.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6 text-center text-gray-500",children:a?"Keine Tabellendaten verf\xfcgbar.":"Bitte w\xe4hlen Sie eine Liga aus."}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("button",{onClick:()=>g(!p),className:"flex items-center justify-between w-full px-4 py-2 text-sm font-medium text-left text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-50",children:[(0,s.jsx)("span",{children:"Informationen zur Sortierreihenfolge"}),(0,s.jsx)("svg",{className:"w-5 h-5 transform ".concat(p?"rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),p&&(0,s.jsxs)("div",{className:"mt-2 p-4 text-sm text-gray-600 bg-gray-50 rounded-md border border-gray-200",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Die Tabelle wird nach folgenden Kriterien sortiert:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,s.jsx)("li",{children:"Punkte"}),(0,s.jsx)("li",{children:"Satzdifferenz"}),(0,s.jsx)("li",{children:"Satzquotient"}),(0,s.jsx)("li",{children:"Direkter Vergleich"}),(0,s.jsx)("li",{children:"Balldifferenz"}),(0,s.jsx)("li",{children:"Ballquotient"}),(0,s.jsx)("li",{children:"Anzahl der Siege"})]})]})]})]})]})}},14114:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s=a(57437),i=a(2265),n=a(48568),r=a(77165),l=a(4355),c=a(16503),d=a(27648),o=a(99376);let m=[{name:"Tabelle",href:"/table"},{name:"Spielplan",href:"/fixtures"}],x=[{name:"Mannschaften",href:"/admin/teams"},{name:"Benutzer",href:"/admin/users"},{name:"Ligen",href:"/admin/leagues"}];function h(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function u(){let e=(0,o.usePathname)();(0,o.useRouter)();let[t,a]=(0,i.useState)(null);(0,i.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/users/me");if(e.ok){let t=await e.json();a(t)}else console.error("Fehler beim Abrufen des Benutzers:",e.statusText)}catch(e){console.error("Fehler beim Abrufen des Benutzers:",e)}},p=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),await fetch("/api/logout",{method:"POST"}),a(null),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),window.location.href="/login"}catch(e){console.error("Fehler beim Abmelden:",e)}};return(0,s.jsx)(n.p,{as:"nav",className:"bg-indigo-600",children:a=>{let{open:i}=a;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,s.jsxs)(n.p.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-indigo-200 hover:bg-indigo-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open main menu"}),i?(0,s.jsx)(r.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,s.jsx)(l.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,s.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,s.jsx)(d.default,{href:"/dashboard",className:"text-2xl font-bold text-white",children:"Volleyball Liga"})}),(0,s.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[m.map(t=>(0,s.jsx)(d.default,{href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,s.jsx)(d.default,{href:"/team",className:h("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,s.jsxs)("div",{className:"relative group hover:cursor-pointer",children:[(0,s.jsxs)(d.default,{href:"/admin",className:h("/admin"===e||e.startsWith("/admin/")?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium inline-flex items-center"),children:["Admin",(0,s.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),(0,s.jsx)("div",{className:"absolute right-0 z-10 mt-0 w-48 origin-top-right rounded-md bg-white dark:bg-card py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block",children:x.map(t=>(0,s.jsx)(d.default,{href:t.href,className:h(e===t.href?"bg-gray-100 text-gray-900 dark:bg-muted dark:text-foreground":"text-gray-700 hover:bg-gray-100 dark:text-foreground dark:hover:bg-muted","block px-4 py-2 text-sm"),children:t.name},t.name))})]})]})})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.default,{href:"/account",className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400 mr-2",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,s.jsx)("button",{onClick:p,className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400",children:(0,s.jsx)(c.Z,{className:"h-5 w-5"})})]}):(0,s.jsx)(d.default,{href:"/login",className:"rounded-md bg-indigo-500 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-400",children:"Login"})})]})}),(0,s.jsx)(n.p.Panel,{className:"sm:hidden",children:(0,s.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[m.map(t=>(0,s.jsx)(n.p.Button,{as:"a",href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,s.jsx)(n.p.Button,{as:"a",href:"/team",className:h("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p.Button,{as:"a",href:"/admin",className:h("/admin"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Admin"}),x.map(t=>(0,s.jsx)(n.p.Button,{as:"a",href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium pl-6"),children:t.name},t.name))]})]})})]})}})}}},function(e){e.O(0,[654,971,117,744],function(){return e(e.s=62297)}),_N_E=e.O()}]);