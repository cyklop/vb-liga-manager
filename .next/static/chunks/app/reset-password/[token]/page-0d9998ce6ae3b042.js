(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{44907:function(e,s,r){Promise.resolve().then(r.bind(r,83065))},99376:function(e,s,r){"use strict";var t=r(35475);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},83065:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return i}});var t=r(57437),a=r(2265),n=r(99376),o=r(18618);function i(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),r=e.token,[i,l]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[c,h]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),y=async e=>{if(e.preventDefault(),h(""),g(""),!r){h("Ung\xfcltiger oder fehlender Reset-Token.");return}if(i!==u){h("Die Passw\xf6rter stimmen nicht \xfcberein.");return}if(i.length<6){h("Das Passwort muss mindestens 6 Zeichen lang sein.");return}f(!0);try{let e=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,password:i})}),t=await e.json();e.ok?(g(t.message||"Dein Passwort wurde erfolgreich zur\xfcckgesetzt. Du kannst dich jetzt anmelden."),setTimeout(()=>{s.push("/login")},3e3)):h(t.message||"Fehler beim Zur\xfccksetzen des Passworts.")}catch(e){console.error("Password reset failed:",e),h("Ein unerwarteter Fehler ist aufgetreten. Bitte versuche es sp\xe4ter erneut.")}finally{f(!1)}};return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)(o.Card,{color:"transparent",shadow:!1,placeholder:void 0,className:"dark:bg-gray-800/30 p-6",children:[(0,t.jsx)(o.Typography,{variant:"h4",color:"blue-gray",placeholder:void 0,className:"dark:text-gray-100",children:"Neues Passwort festlegen"}),(0,t.jsx)(o.Typography,{color:"gray",className:"mt-1 font-normal dark:text-gray-300",placeholder:void 0,children:"Gib dein neues Passwort ein."}),(0,t.jsx)("form",{onSubmit:y,className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:m?(0,t.jsx)(o.Typography,{color:"green",className:"mt-4 text-center text-sm",placeholder:void 0,children:m}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-6",children:[(0,t.jsx)(o.Input,{type:"password",size:"lg",label:"Neues Passwort",value:i,onChange:e=>l(e.target.value),placeholder:void 0,crossOrigin:void 0,className:"dark:text-gray-200 dark:border-gray-500",disabled:p}),(0,t.jsx)(o.Input,{type:"password",size:"lg",label:"Neues Passwort best\xe4tigen",value:u,onChange:e=>d(e.target.value),placeholder:void 0,crossOrigin:void 0,className:"dark:text-gray-200 dark:border-gray-500",disabled:p})]}),c&&(0,t.jsx)(o.Typography,{color:"red",className:"mt-2 text-center text-sm",placeholder:void 0,children:c}),(0,t.jsx)(o.Button,{className:"mt-6",fullWidth:!0,type:"submit",placeholder:void 0,disabled:p,children:p?"Wird verarbeitet...":"Passwort zur\xfccksetzen"})]})})]})})}}},function(e){e.O(0,[384,768,971,117,744],function(){return e(e.s=44907)}),_N_E=e.O()}]);