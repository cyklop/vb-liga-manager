(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{28691:function(e,t,a){Promise.resolve().then(a.bind(a,33058))},33058:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(57437),n=a(2265),s=a(14114),i=a(66003),d=a(36233),l=a(12594),o=a(61601);function m(){let[e,t]=(0,n.useState)([]),[a,m]=(0,n.useState)([]),[c,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)({id:0,email:"",name:"",isAdmin:!1,teamIds:[]}),[b,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null),[k,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{j(),v()},[]);let j=async()=>{let e=await fetch("/api/users");t(await e.json())},v=async()=>{let e=await fetch("/api/teams");m(await e.json())},w=async e=>{e.preventDefault();try{(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,name:h.name,isAdmin:h.isAdmin,teamIds:h.teamIds})})).ok&&(x({id:0,email:"",name:"",isAdmin:!1,teamIds:[]}),u(!1),j())}catch(e){console.error("Fehler beim Hinzuf\xfcgen des Benutzers",e)}},N=async e=>{e.preventDefault();try{(await fetch("/api/users/".concat(h.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,name:h.name,isAdmin:h.isAdmin,teamIds:h.teamIds})})).ok&&(x({id:0,email:"",name:"",isAdmin:!1,teamIds:[]}),u(!1),y(!1),j())}catch(e){console.error("Fehler beim Bearbeiten des Benutzers",e)}},A=async e=>{f(e),g(!0)},C=async()=>{if(p)try{(await fetch("/api/users/".concat(p.id),{method:"DELETE"})).ok&&j()}catch(e){console.error("Fehler beim L\xf6schen des Benutzers",e)}g(!1),f(null)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Benutzer verwalten"}),(0,r.jsx)("button",{onClick:()=>{x({id:0,email:"",name:"",isAdmin:!1,teamIds:[]}),y(!1),u(!0)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4 dark:bg-blue-600 dark:hover:bg-blue-800",children:"Neuen Benutzer hinzuf\xfcgen"}),(0,r.jsx)("ul",{className:"bg-white dark:bg-card shadow overflow-hidden sm:rounded-md",children:e.map(e=>(0,r.jsx)("li",{className:"border-b border-gray-200 dark:border-border last:border-b-0",children:(0,r.jsxs)("div",{className:"px-4 py-4 sm:px-6 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 truncate",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-foreground",children:e.email}),e.teams&&e.teams.length>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-foreground",children:["Teams: ",e.teams.map(e=>e.name).join(", ")]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.isAdmin?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:e.isAdmin?"Admin":"Benutzer"}),e.isSuperAdmin&&(0,r.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",children:"Superadmin"}),(0,r.jsx)("button",{onClick:()=>{let t=e.teams?e.teams.map(e=>e.id):[],{password:a,...r}=e;x({...r,teamIds:t}),y(!0),u(!0)},className:"p-1 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100 rounded dark:text-foreground dark:hover:bg-muted ml-2",title:"Benutzer bearbeiten",children:(0,r.jsx)(l.Z,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>A(e),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-100 rounded dark:text-red-400 dark:hover:bg-red-900/20 ml-2",title:"Benutzer l\xf6schen",children:(0,r.jsx)(o.Z,{className:"h-5 w-5"})})]})]})},e.id))})]}),(0,r.jsx)(i.Z,{isOpen:c,onClose:()=>u(!1),title:k?"Benutzer bearbeiten":"Neuen Benutzer hinzuf\xfcgen",children:(0,r.jsxs)("form",{onSubmit:k?N:w,className:"space-y-4",children:[(0,r.jsx)("input",{type:"email",value:h.email,onChange:e=>x({...h,email:e.target.value}),placeholder:"E-Mail",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300",required:!0}),(0,r.jsx)("input",{type:"text",value:h.name,onChange:e=>x({...h,name:e.target.value}),placeholder:"Name",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300 dark:bg-input dark:border-border dark:text-foreground",required:!0}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Teams"})," ",(0,r.jsxs)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2 dark:border-border",children:[" ",a.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"team-".concat(e.id),checked:(null===(t=h.teamIds)||void 0===t?void 0:t.includes(e.id))||!1,onChange:t=>{t.target.checked?x({...h,teamIds:[...h.teamIds,e.id]}):x({...h,teamIds:h.teamIds.filter(t=>t!==e.id)})},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"team-".concat(e.id),className:"ml-2 block text-sm text-gray-900",children:e.name})]},e.id)})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"isAdmin",checked:h.isAdmin,onChange:e=>x({...h,isAdmin:e.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"isAdmin",className:"ml-2 block text-sm text-gray-900",children:"Admin"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded dark:bg-blue-600 dark:hover:bg-blue-800",children:k?"Aktualisieren":"Hinzuf\xfcgen"})]})}),b&&(0,r.jsx)(d.Z,{onConfirm:C,onCancel:()=>g(!1),message:"M\xf6chten Sie den Benutzer ".concat(null==p?void 0:p.name," wirklich l\xf6schen?")})]})}},12594:function(e,t,a){"use strict";var r=a(2265);let n=r.forwardRef(function(e,t){let{title:a,titleId:n,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});t.Z=n},61601:function(e,t,a){"use strict";var r=a(2265);let n=r.forwardRef(function(e,t){let{title:a,titleId:n,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=n}},function(e){e.O(0,[654,979,971,117,744],function(){return e(e.s=28691)}),_N_E=e.O()}]);