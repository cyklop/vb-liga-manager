(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{26150:function(e,t,n){Promise.resolve().then(n.bind(n,11090))},11090:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(57437),a=n(2265),i=n(14114),s=n(66003),l=n(12594),o=n(61601);function d(){let[e,t]=(0,a.useState)([]),[n,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)({}),[x,g]=(0,a.useState)(null),[f,p]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{await y(),k(),N()})()},[]);let y=async()=>{try{let t=await fetch("/api/users/me");if(t.ok){var e;let n=await t.json();p(n),v(n.isAdmin||n.isSuperAdmin),j((null===(e=n.team)||void 0===e?void 0:e.id)||null),n.isAdmin||n.isSuperAdmin||n.team||router.push("/dashboard")}}catch(e){console.error("Fehler beim Abrufen des aktuellen Benutzers",e)}},k=async()=>{try{let n=await fetch("/api/teams");if(n.ok){var e;let r=await n.json();if(!((null==f?void 0:f.isAdmin)||(null==f?void 0:f.isSuperAdmin))&&(null==f?void 0:null===(e=f.team)||void 0===e?void 0:e.id)){let e=r.filter(e=>{var t;return e.id===(null===(t=f.team)||void 0===t?void 0:t.id)});t(e)}else t(r)}}catch(e){console.error("Fehler beim Abrufen der Teams",e)}},N=async()=>{try{let e=await fetch("/api/users");if(e.ok){let t=await e.json();d(t)}}catch(e){console.error("Fehler beim Abrufen der Benutzer",e)}},L=async e=>{e.preventDefault();try{(await fetch("/api/teams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,teamLeaderId:u.teamLeaderId?parseInt(u.teamLeaderId):null})})).ok&&(h({}),m(!1),k())}catch(e){console.error("Fehler beim Hinzuf\xfcgen des Teams",e)}},A=async e=>{if(e.preventDefault(),x)try{(await fetch("/api/teams/".concat(x.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,teamLeaderId:u.teamLeaderId?parseInt(u.teamLeaderId):null})})).ok&&(h({}),m(!1),g(null),k())}catch(e){console.error("Fehler beim Bearbeiten des Teams",e)}},S=async e=>{try{(await fetch("/api/teams/".concat(e),{method:"DELETE"})).ok&&k()}catch(e){console.error("Fehler beim L\xf6schen des Teams",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:b?"Mannschaften verwalten":"Meine Mannschaft"}),b&&(0,r.jsx)("button",{onClick:()=>{g(null),h({}),m(!0)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4 dark:bg-blue-600 dark:hover:bg-blue-800",children:"Neue Mannschaft hinzuf\xfcgen"}),(0,r.jsx)("ul",{className:"bg-white dark:bg-card shadow overflow-hidden sm:rounded-md",children:e.map(e=>(0,r.jsx)("li",{className:"border-b border-gray-200 dark:border-border last:border-b-0",children:(0,r.jsxs)("div",{className:"px-4 py-4 sm:px-6 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 truncate",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-foreground",children:e.location}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-foreground",children:e.hallAddress}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-foreground",children:["Trainingszeiten: ",e.trainingTimes]}),e.teamLeader&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-foreground",children:["Spielleiter: ",e.teamLeader.name]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>{var t,n;g(e),h({id:e.id,name:e.name||"",location:e.location||"",hallAddress:e.hallAddress||"",trainingTimes:e.trainingTimes||"",teamLeaderId:(null===(n=e.teamLeader)||void 0===n?void 0:null===(t=n.id)||void 0===t?void 0:t.toString())||""}),m(!1),setTimeout(()=>m(!0),0)},className:"p-1 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100 rounded dark:text-foreground dark:hover:bg-muted mr-2",title:"Mannschaft bearbeiten",children:(0,r.jsx)(l.Z,{className:"h-5 w-5"})}),b&&(0,r.jsx)("button",{onClick:()=>S(e.id),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-100 rounded dark:text-red-400 dark:hover:bg-red-900/20",title:"Mannschaft l\xf6schen",children:(0,r.jsx)(o.Z,{className:"h-5 w-5"})})]})]})},e.id))})]}),(0,r.jsx)(s.Z,{isOpen:c,onClose:()=>{m(!1),h({}),g(null)},title:x?"Mannschaft bearbeiten":"Neue Mannschaft hinzuf\xfcgen",children:(0,r.jsxs)("form",{onSubmit:x?A:L,children:[(0,r.jsx)("input",{type:"text",value:u.name||"",onChange:e=>h({...u,name:e.target.value}),placeholder:"Mannschaftsname",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300 mb-2",required:!0}),(0,r.jsx)("input",{type:"text",value:u.location||"",onChange:e=>h({...u,location:e.target.value}),placeholder:"Ort",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300 mb-2"}),(0,r.jsx)("input",{type:"text",value:u.hallAddress||"",onChange:e=>h({...u,hallAddress:e.target.value}),placeholder:"Adresse der Halle",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300 mb-2"}),(0,r.jsx)("input",{type:"text",value:u.trainingTimes||"",onChange:e=>h({...u,trainingTimes:e.target.value}),placeholder:"Trainingszeiten",className:"w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300 mb-2"}),(0,r.jsxs)("select",{value:u.teamLeaderId||"",onChange:e=>h({...u,teamLeaderId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300 mb-2",children:[(0,r.jsx)("option",{value:"",children:"Spielleiter ausw\xe4hlen (optional)"}),n.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsx)("button",{type:"submit",className:"mt-4 w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded dark:bg-blue-600 dark:hover:bg-blue-800",children:x?"Aktualisieren":"Hinzuf\xfcgen"})]})})]})}},66003:function(e,t,n){"use strict";var r=n(57437);n(2265),t.Z=e=>{let{isOpen:t,onClose:n,title:a,children:i}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg shadow-lg w-full max-w-md relative",children:[" ",(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium dark:text-gray-100",children:a})," ",(0,r.jsxs)("button",{onClick:n,className:"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-100",children:[" ",(0,r.jsx)("span",{className:"sr-only",children:"Schlie\xdfen"}),(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),i]})}):null}},14114:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(57437),a=n(2265),i=n(48568),s=n(77165),l=n(4355),o=n(16503),d=n(27648),c=n(99376);let m=[{name:"Tabelle",href:"/table"},{name:"Spielplan",href:"/fixtures"}],u=[{name:"Mannschaften",href:"/admin/teams"},{name:"Benutzer",href:"/admin/users"},{name:"Ligen",href:"/admin/leagues"}];function h(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function x(){let e=(0,c.usePathname)();(0,c.useRouter)();let[t,n]=(0,a.useState)(null);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/users/me");if(e.ok){let t=await e.json();n(t)}else console.error("Fehler beim Abrufen des Benutzers:",e.statusText)}catch(e){console.error("Fehler beim Abrufen des Benutzers:",e)}},g=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),await fetch("/api/logout",{method:"POST"}),n(null),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),window.location.href="/login"}catch(e){console.error("Fehler beim Abmelden:",e)}};return(0,r.jsx)(i.p,{as:"nav",className:"bg-indigo-600",children:n=>{let{open:a}=n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,r.jsxs)(i.p.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-indigo-200 hover:bg-indigo-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),a?(0,r.jsx)(s.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,r.jsx)(l.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,r.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,r.jsx)(d.default,{href:"/dashboard",className:"text-2xl font-bold text-white",children:"Volleyball Liga"})}),(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[m.map(t=>(0,r.jsx)(d.default,{href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,r.jsx)(d.default,{href:"/team",className:h("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,r.jsxs)("div",{className:"relative group hover:cursor-pointer",children:[(0,r.jsxs)(d.default,{href:"/admin",className:h("/admin"===e||e.startsWith("/admin/")?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium inline-flex items-center"),children:["Admin",(0,r.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),(0,r.jsx)("div",{className:"absolute right-0 z-10 mt-0 w-48 origin-top-right rounded-md bg-white dark:bg-card py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block",children:u.map(t=>(0,r.jsx)(d.default,{href:t.href,className:h(e===t.href?"bg-gray-100 text-gray-900 dark:bg-muted dark:text-foreground":"text-gray-700 hover:bg-gray-100 dark:text-foreground dark:hover:bg-muted","block px-4 py-2 text-sm"),children:t.name},t.name))})]})]})})]}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.default,{href:"/account",className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400 mr-2",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,r.jsx)("button",{onClick:g,className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400",children:(0,r.jsx)(o.Z,{className:"h-5 w-5"})})]}):(0,r.jsx)(d.default,{href:"/login",className:"rounded-md bg-indigo-500 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-400",children:"Login"})})]})}),(0,r.jsx)(i.p.Panel,{className:"sm:hidden",children:(0,r.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[m.map(t=>(0,r.jsx)(i.p.Button,{as:"a",href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,r.jsx)(i.p.Button,{as:"a",href:"/team",className:h("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p.Button,{as:"a",href:"/admin",className:h("/admin"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Admin"}),u.map(t=>(0,r.jsx)(i.p.Button,{as:"a",href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium pl-6"),children:t.name},t.name))]})]})})]})}})}},12594:function(e,t,n){"use strict";var r=n(2265);let a=r.forwardRef(function(e,t){let{title:n,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});t.Z=a},61601:function(e,t,n){"use strict";var r=n(2265);let a=r.forwardRef(function(e,t){let{title:n,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=a}},function(e){e.O(0,[654,971,117,744],function(){return e(e.s=26150)}),_N_E=e.O()}]);