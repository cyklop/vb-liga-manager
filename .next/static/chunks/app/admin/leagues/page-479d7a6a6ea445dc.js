(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{40287:function(e,t,s){Promise.resolve().then(s.bind(s,72331))},72331:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(57437),i=s(2265),a=s(99376),r=s(14114),l=s(66003),o=s(12594),d=s(61601),c=s(94675),m=s(6243),u=s(76098),h=s(57897),x=s(87233),g=s(4355),p=s(23539),f=s.n(p),b=s(10795),y=s(93662),v=s(59892);function j(){var e,t,s,g,p;let[v,j]=(0,i.useState)([]),[N,k]=(0,i.useState)([]),[S,L]=(0,i.useState)(null),[T,A]=(0,i.useState)([]),[W,F]=(0,i.useState)(!1),[P,C]=(0,i.useState)({name:"",slug:"",numberOfTeams:0,hasReturnMatches:!1,teamIds:[],isActive:!0,pointsWin30:3,pointsWin31:3,pointsWin32:2,pointsLoss32:1}),[I,O]=(0,i.useState)(null),[D,M]=(0,i.useState)(null),[z,R]=(0,i.useState)(!1),[B,E]=(0,i.useState)(!1),Z=(0,b.Dy)((0,b.VT)(b.we),(0,b.VT)(b.Lg,{coordinateGetter:y.is})),[U,_]=(0,i.useState)(null),[H,q]=(0,i.useState)(!1),[G,K]=(0,i.useState)(null);(0,i.useEffect)(()=>{J(),Q(),X()},[]);let V=(0,a.useRouter)(),J=async()=>{try{let t=await fetch("/api/users/me");if(t.ok){var e;let s=await t.json();_(s),q(s.isAdmin||s.isSuperAdmin),K((null===(e=s.team)||void 0===e?void 0:e.id)||null),s.isAdmin||s.isSuperAdmin||V.push("/dashboard")}}catch(e){console.error("Fehler beim Abrufen des aktuellen Benutzers",e)}},Q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=await fetch("/api/leagues");if(t.ok){let s=[...await t.json()].sort((e,t)=>t.id-e.id);if(j(s),e){let t=s.find(t=>t.id===e),n=(null==t?void 0:t.fixtures)?[...t.fixtures].sort((e,t)=>e.order-t.order):[];k(n)}}else console.error("Fehler beim Abrufen der Ligen:",t.statusText)}catch(e){console.error("Fehler beim Abrufen der Ligen",e)}},X=async()=>{try{let e=await fetch("/api/teams");if(e.ok){let t=await e.json();A(t)}else console.error("Fehler beim Abrufen der Teams:",e.statusText)}catch(e){console.error("Fehler beim Abrufen der Teams",e)}},Y=async e=>{let t=v.find(t=>t.id===e);if(!t||!t.isActive){alert("Spielpl\xe4ne k\xf6nnen nur f\xfcr aktive Ligen generiert werden. Abgeschlossene Ligen m\xfcssen zuerst wieder aktiviert werden.");return}if(confirm("M\xf6chten Sie den Spielplan f\xfcr Liga ".concat(e," wirklich generieren? Bestehende Spielpl\xe4ne f\xfcr diese Liga werden \xfcberschrieben.")))try{let t=await fetch("/api/leagues/".concat(e,"/generate-fixtures"),{method:"POST"}),s=await t.json();t.ok?(alert(s.message||"Spielplan erfolgreich generiert!"),Q(e)):alert("Fehler: ".concat(s.message||"Unbekannter Fehler"))}catch(e){console.error("Fehler beim Generieren des Spielplans:",e),alert("Ein Netzwerkfehler ist aufgetreten.")}},$=e=>{if(S===e)L(null),k([]),E(!1);else{let t=v.find(t=>t.id===e);k((null==t?void 0:t.fixtures)?[...t.fixtures].sort((e,t)=>e.order-t.order):[]),L(e),E(!1),(null==t?void 0:t.fixtures)||console.warn("Fixtures for league ".concat(e," not found in fetched data."))}},ee=(e,t)=>{if(!t.isActive){alert("Spielpaarungen k\xf6nnen nur f\xfcr aktive Ligen bearbeitet werden. Abgeschlossene Ligen m\xfcssen zuerst wieder aktiviert werden.");return}if(!H&&G&&e.homeTeamId!==G){alert("Sie k\xf6nnen nur Heimspiele Ihrer eigenen Mannschaft bearbeiten.");return}M({...e,fixtureDate:e.fixtureDate?new Date(e.fixtureDate).toISOString().split("T")[0]:null,homeSets:e.homeSets,awaySets:e.awaySets,homePoints:e.homePoints,awayPoints:e.awayPoints}),R(!0)},et=async e=>{if(e.preventDefault(),D)try{let e=await fetch("/api/fixtures/".concat(D.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({homeTeamId:D.homeTeamId,awayTeamId:D.awayTeamId,fixtureDate:D.fixtureDate||null,homeSets:null!==D.homeSets&&""!==String(D.homeSets).trim()?Number(D.homeSets):null,awaySets:null!==D.awaySets&&""!==String(D.awaySets).trim()?Number(D.awaySets):null,homePoints:null!==D.homePoints&&""!==String(D.homePoints).trim()?Number(D.homePoints):null,awayPoints:null!==D.awayPoints&&""!==String(D.awayPoints).trim()?Number(D.awayPoints):null})});if(e.ok)R(!1),M(null),Q(S);else{let t=await e.json();alert("Fehler beim Aktualisieren der Spielpaarung: ".concat(t.message))}}catch(e){console.error("Fehler beim Aktualisieren der Spielpaarung:",e),alert("Ein Netzwerkfehler ist aufgetreten.")}},es=e=>{if(!D)return;let{name:t,value:s}=e.target;if(["homeSets","awaySets","homePoints","awayPoints"].includes(t)){let e=""===s.trim()?null:Number(s);M({...D,[t]:isNaN(e)||null!==e&&e<0?null:e})}else M({...D,[t]:s})},en=(0,i.useCallback)(e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&k(e=>{let n=e.findIndex(e=>e.id===t.id),i=e.findIndex(e=>e.id===s.id),a=(0,y.Rp)(e,n,i);return E(!0),a})},[]),ei=async()=>{if(!S||!B)return;let e=N.map(e=>e.id);try{let t=await fetch("/api/leagues/".concat(S,"/fixtures/reorder"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderedFixtureIds:e})});if(t.ok)E(!1),alert("Spielplanreihenfolge erfolgreich gespeichert!"),Q(S);else{let e=await t.json();alert("Fehler beim Speichern der Reihenfolge: ".concat(e.message))}}catch(e){console.error("Fehler beim Speichern der Spielplanreihenfolge:",e),alert("Ein Netzwerkfehler ist aufgetreten.")}},ea=async e=>{e.preventDefault();let t={...P,pointsWin30:Number(P.pointsWin30),pointsWin31:Number(P.pointsWin31),pointsWin32:Number(P.pointsWin32),pointsLoss32:Number(P.pointsLoss32)};try{let e=await fetch("/api/leagues",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok)C({name:"",slug:"",numberOfTeams:0,hasReturnMatches:!1,teamIds:[],isActive:!0,pointsWin30:3,pointsWin31:3,pointsWin32:2,pointsLoss32:1}),F(!1),Q();else{let t=await e.json();alert(t.message)}}catch(e){console.error("Fehler beim Hinzuf\xfcgen der Liga",e)}},er=async e=>{if(e.preventDefault(),I)try{let e=await fetch("/api/leagues/".concat(I.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...P,pointsWin30:Number(P.pointsWin30),pointsWin31:Number(P.pointsWin31),pointsWin32:Number(P.pointsWin32),pointsLoss32:Number(P.pointsLoss32)})});if(e.ok)C({name:"",numberOfTeams:0,hasReturnMatches:!1,teamIds:[],pointsWin30:3,pointsWin31:3,pointsWin32:2,pointsLoss32:1}),F(!1),O(null),Q();else{let t=await e.json();alert(t.message)}}catch(e){console.error("Fehler beim Bearbeiten der Liga",e)}},el=async e=>{if(confirm("M\xf6chten Sie die Liga mit ID ".concat(e," wirklich l\xf6schen? Alle zugeh\xf6rigen Spielpl\xe4ne werden ebenfalls gel\xf6scht.")))try{let t=await fetch("/api/leagues/".concat(e),{method:"DELETE"});if(t.ok)Q(),S===e&&(L(null),k([]),E(!1));else{let e=await t.json();alert("Fehler beim L\xf6schen der Liga: ".concat(e.message||"Unbekannter Fehler"))}}catch(e){console.error("Fehler beim L\xf6schen der Liga",e),alert("Ein Netzwerkfehler ist aufgetreten.")}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{}),(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:H?"Ligen verwalten":"Spielpl\xe4ne anzeigen"}),H&&(0,n.jsx)("button",{onClick:()=>{O(null),C({name:"",numberOfTeams:0,hasReturnMatches:!1,teamIds:[],pointsWin30:3,pointsWin31:3,pointsWin32:2,pointsLoss32:1}),F(!0)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4",children:"Neue Liga hinzuf\xfcgen"}),(0,n.jsx)("ul",{className:"bg-white dark:bg-card shadow overflow-hidden sm:rounded-md",children:v.map(e=>(0,n.jsxs)("li",{className:"border-b border-gray-200 dark:border-border last:border-b-0",children:[(0,n.jsxs)("div",{className:"px-4 py-4 sm:px-6 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 truncate",children:e.name}),(0,n.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium rounded-full ".concat(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:e.isActive?"Aktiv":"Abgeschlossen"})]}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 dark:text-foreground",children:[e.teams.length," / ",e.numberOfTeams," Teams: ",e.teams.map(e=>e.name).join(", ")||"Keine Teams zugewiesen"]}),(0,n.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Erstellt am: ",new Date(e.createdAt).toLocaleDateString("de-DE")]}),(0,n.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["\xd6ffentlicher Link: ",(0,n.jsxs)("a",{href:"/public/league/".concat(e.slug),target:"_blank",className:"text-blue-500 hover:underline",children:["/public/league/",e.slug]})]})]}),(0,n.jsxs)("div",{className:"flex space-x-1",children:[H&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{O(e),C({name:e.name,slug:e.slug,numberOfTeams:e.numberOfTeams,hasReturnMatches:e.hasReturnMatches,teamIds:e.teams.map(e=>e.id),isActive:e.isActive,pointsWin30:e.pointsWin30,pointsWin31:e.pointsWin31,pointsWin32:e.pointsWin32,pointsLoss32:e.pointsLoss32}),F(!0)},className:"p-1 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100 rounded",title:"Liga bearbeiten",children:(0,n.jsx)(o.Z,{className:"h-5 w-5"})}),(0,n.jsx)("button",{onClick:()=>el(e.id),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-100 rounded",title:"Liga l\xf6schen",children:(0,n.jsx)(d.Z,{className:"h-5 w-5"})}),(0,n.jsx)("button",{onClick:()=>{O(e),C({...P,name:e.name,slug:e.slug,numberOfTeams:e.numberOfTeams,hasReturnMatches:e.hasReturnMatches,teamIds:e.teams.map(e=>e.id),isActive:!e.isActive,pointsWin30:e.pointsWin30,pointsWin31:e.pointsWin31,pointsWin32:e.pointsWin32,pointsLoss32:e.pointsLoss32}),F(!0)},className:"p-1 ".concat(e.isActive?"text-amber-600 hover:text-amber-900":"text-green-600 hover:text-green-900"," hover:bg-gray-100 rounded"),title:e.isActive?"Liga abschlie\xdfen":"Liga wieder aktivieren",children:e.isActive?(0,n.jsx)(c.Z,{className:"h-5 w-5"}):(0,n.jsx)(m.Z,{className:"h-5 w-5"})}),(0,n.jsx)("button",{onClick:()=>Y(e.id),className:"p-1 ".concat(e.isActive?"text-green-600 hover:text-green-900 hover:bg-green-100":"text-gray-400 cursor-not-allowed"," rounded"),title:e.isActive?"Spielplan generieren":"Liga ist abgeschlossen",disabled:!e.isActive,children:(0,n.jsx)(u.Z,{className:"h-5 w-5"})})]}),(0,n.jsx)("button",{onClick:()=>$(e.id),className:"p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded",title:S===e.id?"Spielplan verbergen":"Spielplan anzeigen",children:(0,n.jsx)(h.Z,{className:"h-5 w-5"})})]})]}),S===e.id&&(0,n.jsxs)("div",{className:"px-4 py-4 sm:px-6 border-t border-gray-200 dark:border-border bg-gray-50 dark:bg-muted",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Spielplan"}),H&&B&&(0,n.jsxs)("button",{onClick:ei,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1.5 px-4 rounded text-sm flex items-center shadow-sm transition duration-150 ease-in-out",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),"Reihenfolge speichern"]})]}),N.length>0?(0,n.jsx)(b.LB,{sensors:Z,collisionDetection:b.pE,onDragEnd:en,children:(0,n.jsx)(y.Fo,{items:N.map(e=>e.id),strategy:y.qw,children:(0,n.jsx)("ul",{className:"space-y-2",children:N.map(t=>(0,n.jsx)(w,{fixture:t,onEditClick:t=>ee(t,e),isLeagueActive:e.isActive},t.id))})})}):(0,n.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Kein Spielplan f\xfcr diese Liga vorhanden oder generiert."})]})]},e.id))})]}),(0,n.jsx)(l.Z,{isOpen:W,onClose:()=>{F(!1),O(null)},title:I?"Liga bearbeiten":"Neue Liga hinzuf\xfcgen",children:(0,n.jsxs)("form",{onSubmit:I?er:ea,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"leagueName",className:"block text-sm font-medium text-gray-700",children:"Liganame"}),(0,n.jsx)("input",{id:"leagueName",type:"text",value:P.name,onChange:e=>C({...P,name:e.target.value}),placeholder:"z.B. Kreisliga A",required:!0,className:"mt-1 w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300"})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("label",{htmlFor:"leagueSlug",className:"block text-sm font-medium text-gray-700",children:"URL-Slug"}),(0,n.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,n.jsx)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"/public/league/"}),(0,n.jsx)("input",{id:"leagueSlug",type:"text",value:P.slug,onChange:e=>C({...P,slug:e.target.value}),placeholder:P.name?(p=P.name,f()(p,{lower:!0,strict:!0,locale:"de"})):"volleyball-liga-2024",className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md border border-gray-300 focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300"})]}),(0,n.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Dieser Wert wird in der URL verwendet. Nur Kleinbuchstaben, Zahlen und Bindestriche erlaubt. Leer lassen f\xfcr automatische Generierung aus dem Namen."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"numberOfTeams",className:"block text-sm font-medium text-gray-700",children:"Anzahl der Mannschaften"}),(0,n.jsx)("input",{id:"numberOfTeams",type:"number",min:"2",value:P.numberOfTeams,onChange:e=>C({...P,numberOfTeams:parseInt(e.target.value)||0}),required:!0,className:"mt-1 w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-100 focus:border-indigo-300"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"hasReturnMatches",type:"checkbox",checked:P.hasReturnMatches,onChange:e=>C({...P,hasReturnMatches:e.target.checked}),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,n.jsx)("label",{htmlFor:"hasReturnMatches",className:"ml-2 block text-sm text-gray-900",children:"Hin- und R\xfcckrunde"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{id:"isActive",type:"checkbox",checked:P.isActive,onChange:e=>C({...P,isActive:e.target.checked}),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,n.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Liga ist aktiv"})]}),(0,n.jsxs)("fieldset",{className:"border border-gray-300 p-3 rounded-md",children:[(0,n.jsx)("legend",{className:"text-sm font-medium text-gray-700 px-1",children:"Punktregeln"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"pointsWin30",className:"block text-xs font-medium text-gray-600",children:"Punkte f\xfcr 3:0"}),(0,n.jsx)("input",{id:"pointsWin30",type:"number",min:"0",value:P.pointsWin30,onChange:e=>C({...P,pointsWin30:parseInt(e.target.value)||0}),className:"mt-1 w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"pointsWin31",className:"block text-xs font-medium text-gray-600",children:"Punkte f\xfcr 3:1"}),(0,n.jsx)("input",{id:"pointsWin31",type:"number",min:"0",value:P.pointsWin31,onChange:e=>C({...P,pointsWin31:parseInt(e.target.value)||0}),className:"mt-1 w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"pointsWin32",className:"block text-xs font-medium text-gray-600",children:"Punkte f\xfcr 3:2 (Sieger)"}),(0,n.jsx)("input",{id:"pointsWin32",type:"number",min:"0",value:P.pointsWin32,onChange:e=>C({...P,pointsWin32:parseInt(e.target.value)||0}),className:"mt-1 w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"pointsLoss32",className:"block text-xs font-medium text-gray-600",children:"Punkte f\xfcr 2:3 (Verlierer)"}),(0,n.jsx)("input",{id:"pointsLoss32",type:"number",min:"0",value:P.pointsLoss32,onChange:e=>C({...P,pointsLoss32:parseInt(e.target.value)||0}),className:"mt-1 w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Teams zuordnen (max. ",P.numberOfTeams||"N/A",")"]}),(0,n.jsx)("div",{className:"mt-1 max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2 space-y-1",children:T.length>0?T.map(e=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:"team-".concat(e.id),checked:P.teamIds.includes(e.id),disabled:!P.teamIds.includes(e.id)&&P.teamIds.length>=P.numberOfTeams,onChange:t=>{let s=t.target.checked,n=P.teamIds,i=P.numberOfTeams;s?n.length<i?C({...P,teamIds:[...n,e.id]}):(t.target.checked=!1,alert("Es k\xf6nnen maximal ".concat(i," Teams zugewiesen werden."))):C({...P,teamIds:n.filter(t=>t!==e.id)})},className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 disabled:opacity-50"}),(0,n.jsx)("label",{htmlFor:"team-".concat(e.id),className:"ml-2 block text-sm text-gray-900",children:e.name})]},e.id)):(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Keine Teams verf\xfcgbar."})}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[P.teamIds.length," von ",P.numberOfTeams||0," Teams ausgew\xe4hlt"]})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:I?"Liga aktualisieren":"Liga hinzuf\xfcgen"})]})}),(0,n.jsx)(l.Z,{isOpen:z,onClose:()=>{R(!1),M(null)},title:"Spielpaarung bearbeiten",children:D&&(0,n.jsxs)("form",{onSubmit:et,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"homeTeamId",className:"block text-sm font-medium text-gray-700",children:"Heimteam"}),(0,n.jsx)("select",{id:"homeTeamId",name:"homeTeamId",value:D.homeTeamId||"",onChange:es,required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:T.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"awayTeamId",className:"block text-sm font-medium text-gray-700",children:"Ausw\xe4rtsteam"}),(0,n.jsx)("select",{id:"awayTeamId",name:"awayTeamId",value:D.awayTeamId||"",onChange:es,required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:T.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"fixtureDate",className:"block text-sm font-medium text-gray-700",children:"Datum"}),(0,n.jsx)("input",{type:"date",id:"fixtureDate",name:"fixtureDate",value:D.fixtureDate||"",onChange:es,className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"homeSets",className:"block text-sm font-medium text-gray-700",children:"S\xe4tze Heim"}),(0,n.jsx)("input",{type:"number",id:"homeSets",name:"homeSets",min:"0",max:"3",value:null!==(e=D.homeSets)&&void 0!==e?e:"",onChange:es,placeholder:"0-3",className:"mt-1 block w-full px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"awaySets",className:"block text-sm font-medium text-gray-700",children:"S\xe4tze Ausw\xe4rts"}),(0,n.jsx)("input",{type:"number",id:"awaySets",name:"awaySets",min:"0",max:"3",value:null!==(t=D.awaySets)&&void 0!==t?t:"",onChange:es,placeholder:"0-3",className:"mt-1 block w-full px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"homePoints",className:"block text-sm font-medium text-gray-700",children:"Punkte Heim (B\xe4lle)"}),(0,n.jsx)("input",{type:"number",id:"homePoints",name:"homePoints",min:"0",value:null!==(s=D.homePoints)&&void 0!==s?s:"",onChange:es,placeholder:"Gesamtb\xe4lle",className:"mt-1 block w-full px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"awayPoints",className:"block text-sm font-medium text-gray-700",children:"Punkte Ausw\xe4rts (B\xe4lle)"}),(0,n.jsx)("input",{type:"number",id:"awayPoints",name:"awayPoints",min:"0",value:null!==(g=D.awayPoints)&&void 0!==g?g:"",onChange:es,placeholder:"Gesamtb\xe4lle",className:"mt-1 block w-full px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Spielpaarung aktualisieren"})]})})]})}function w(e){var t,s;let{fixture:i,onEditClick:a,isLeagueActive:r}=e,{attributes:l,listeners:d,setNodeRef:c,transform:m,transition:u,isDragging:h}=(0,y.nB)({id:i.id}),x={transform:v.ux.Transform.toString(m),transition:u,opacity:h?.5:1,touchAction:"none"};return(0,n.jsxs)("li",{ref:c,style:x,className:"flex justify-between items-center text-sm p-2 border rounded bg-white dark:bg-card dark:border-border shadow-sm hover:bg-gray-50 dark:hover:bg-muted",children:[(0,n.jsx)("button",{...l,...d,className:"cursor-grab p-1 text-gray-400 hover:text-gray-600 mr-2",title:"Verschieben",children:(0,n.jsx)(g.Z,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{className:"flex-grow flex items-center",children:[" ",(0,n.jsxs)("span",{children:[(null===(t=i.homeTeam)||void 0===t?void 0:t.name)||"N/A"," vs ",(null===(s=i.awayTeam)||void 0===s?void 0:s.name)||"N/A"]}),(0,n.jsx)("span",{className:"ml-4 text-gray-500 text-xs",children:i.fixtureDate?new Date(i.fixtureDate).toLocaleDateString("de-DE"):"Datum N/A"})]}),(0,n.jsxs)("div",{className:"flex items-center mx-4 space-x-3",children:[(0,n.jsx)("span",{className:"font-semibold w-12 text-center text-base",children:null!==i.homeSets&&null!==i.awaySets?"".concat(i.homeSets," : ").concat(i.awaySets):"- : -"}),(0,n.jsxs)("span",{className:"font-normal w-12 text-center text-gray-600 text-xs",children:["(P: ",null!==i.homeMatchPoints&&null!==i.awayMatchPoints?"".concat(i.homeMatchPoints," : ").concat(i.awayMatchPoints):"- : -",")"]})]}),(0,n.jsx)("div",{className:"flex items-center space-x-1 ml-2",children:(0,n.jsx)("button",{onClick:()=>a(i),className:"p-1 ".concat(r?"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100":"text-gray-400 cursor-not-allowed"," rounded"),title:r?"Spielpaarung bearbeiten":"Liga ist inaktiv",disabled:!r,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]})}},66003:function(e,t,s){"use strict";var n=s(57437);s(2265),t.Z=e=>{let{isOpen:t,onClose:s,title:i,children:a}=e;return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg shadow-lg w-full max-w-md relative",children:[" ",(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-medium dark:text-gray-100",children:i})," ",(0,n.jsxs)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-100",children:[" ",(0,n.jsx)("span",{className:"sr-only",children:"Schlie\xdfen"}),(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),a]})}):null}},14114:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var n=s(57437),i=s(2265),a=s(48568),r=s(77165),l=s(4355),o=s(16503),d=s(27648),c=s(99376);let m=[{name:"Tabelle",href:"/table"},{name:"Spielplan",href:"/fixtures"}],u=[{name:"Mannschaften",href:"/admin/teams"},{name:"Benutzer",href:"/admin/users"},{name:"Ligen",href:"/admin/leagues"}];function h(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function x(){let e=(0,c.usePathname)();(0,c.useRouter)();let[t,s]=(0,i.useState)(null);(0,i.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/users/me");if(e.ok){let t=await e.json();s(t)}else console.error("Fehler beim Abrufen des Benutzers:",e.statusText)}catch(e){console.error("Fehler beim Abrufen des Benutzers:",e)}},g=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),await fetch("/api/logout",{method:"POST"}),s(null),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),window.location.href="/login"}catch(e){console.error("Fehler beim Abmelden:",e)}};return(0,n.jsx)(a.p,{as:"nav",className:"bg-indigo-600",children:s=>{let{open:i}=s;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,n.jsxs)(a.p.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-indigo-200 hover:bg-indigo-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),i?(0,n.jsx)(r.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,n.jsx)(l.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,n.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,n.jsx)(d.default,{href:"/dashboard",className:"text-2xl font-bold text-white",children:"Volleyball Liga"})}),(0,n.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,n.jsxs)("div",{className:"flex space-x-4",children:[m.map(t=>(0,n.jsx)(d.default,{href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,n.jsx)(d.default,{href:"/team",className:h("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,n.jsxs)("div",{className:"relative group hover:cursor-pointer",children:[(0,n.jsxs)(d.default,{href:"/admin",className:h("/admin"===e||e.startsWith("/admin/")?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","rounded-md px-3 py-2 text-sm font-medium inline-flex items-center"),children:["Admin",(0,n.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),(0,n.jsx)("div",{className:"absolute right-0 z-10 mt-0 w-48 origin-top-right rounded-md bg-white dark:bg-card py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block",children:u.map(t=>(0,n.jsx)(d.default,{href:t.href,className:h(e===t.href?"bg-gray-100 text-gray-900 dark:bg-muted dark:text-foreground":"text-gray-700 hover:bg-gray-100 dark:text-foreground dark:hover:bg-muted","block px-4 py-2 text-sm"),children:t.name},t.name))})]})]})})]}),(0,n.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{href:"/account",className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400 mr-2",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,n.jsx)("button",{onClick:g,className:"rounded-md bg-indigo-500 p-2 text-sm font-medium text-white hover:bg-indigo-400",children:(0,n.jsx)(o.Z,{className:"h-5 w-5"})})]}):(0,n.jsx)(d.default,{href:"/login",className:"rounded-md bg-indigo-500 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-400",children:"Login"})})]})}),(0,n.jsx)(a.p.Panel,{className:"sm:hidden",children:(0,n.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[m.map(t=>(0,n.jsx)(a.p.Button,{as:"a",href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:t.name},t.name)),(null==t?void 0:t.team)&&(0,n.jsx)(a.p.Button,{as:"a",href:"/team",className:h("/team"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Meine Mannschaft"}),((null==t?void 0:t.isAdmin)||(null==t?void 0:t.isSuperAdmin))&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p.Button,{as:"a",href:"/admin",className:h("/admin"===e?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:"Admin"}),u.map(t=>(0,n.jsx)(a.p.Button,{as:"a",href:t.href,className:h(e===t.href?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-500 hover:text-white","block rounded-md px-3 py-2 text-base font-medium pl-6"),children:t.name},t.name))]})]})})]})}})}}},function(e){e.O(0,[654,73,971,117,744],function(){return e(e.s=40287)}),_N_E=e.O()}]);